### schema
    create table file (
      file_uuid varchar(255) binary not null,
      storage_id int unsigned not null auto_increment,
      size int unsigned not null,
      primary key (file_uuid)
    );
    create table storage (
      storage_id int unsigned not null auto_increment,
      hostname varchar(255) binary not null,
      primary key (storage_id)
    );

### prettyfs.psgi
PrettyFS::Client is needed

Jonk + Twiggy + Raw DBI + Config::Simple

### more smart x-reproxy-url

reproxy-url + callback-url
proxy access callback-url when can't get reproxy-url

### TODO
 * rebalance
 * replication

### ARCHITECTURE
* Jonk + Twiggy + Raw DBI + Config::Simpleな感じの構成がよいのでは
* MogileFSよりもメタデータを多く持ちたい。ただのバイトストリームはあつかいずらいのですよ
* keyが示すファイルがupdateされるとURLが変わるので困る
* reproxy-cacheの場合に限る
* そもそもPerlbalのreproxy-cacheがキャッシュ切れのときにappに引き直しにいかないのが問題
* callback-url的なのを一緒に設定してキャッシュきれてるときはそこにcallbackすればいいんじゃないか



